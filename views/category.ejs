<%- include('partials/header') %>

    <div class="container mx-auto px-3 py-6 max-w-6xl">

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <div class="lg:col-span-2">
                <nav class="flex text-sm text-gray-400 mb-6 overflow-x-auto whitespace-nowrap" aria-label="Breadcrumb">
                    <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li class="inline-flex items-center">
                            <a href="/" class="hover:text-pink-500 transition flex items-center gap-1">
                                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20">
                                    <path
                                        d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z" />
                                </svg>
                                Home
                            </a>
                        </li>

                        <li>
                            <div class="flex items-center">
                                <svg class="w-3 h-3 text-gray-500 mx-1" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2" d="m1 9 4-4-4-4" />
                                </svg>
                                <span class="text-gray-500">Category</span>
                            </div>
                        </li>

                        <li aria-current="page">
                            <div class="flex items-center">
                                <svg class="w-3 h-3 text-gray-500 mx-1" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2" d="m1 9 4-4-4-4" />
                                </svg>
                                <span class="text-pink-500 font-medium">
                                    <%= categoryName %>
                                </span>
                            </div>
                        </li>
                    </ol>
                </nav>
                <div
                    class="rounded-xl p-6 border border-gray-700 mb-8 bg-gray-800/50 flex items-center justify-between shadow-lg relative overflow-hidden">
                    <div class="relative z-10">
                        <h4 class="text-pink-500 text-xs font-bold uppercase tracking-widest mb-1">Kategori</h4>
                        <h2 class="text-3xl font-extrabold text-white mb-2">
                            <%= categoryName %>
                        </h2>
                        <p class="text-gray-400 text-sm max-w-lg">
                            <%= seoData.seo_description %>
                        </p>
                    </div>
                    <div
                        class="absolute right-0 top-0 h-full w-1/3 bg-gradient-to-l from-pink-600/10 to-transparent pointer-events-none">
                    </div>
                    <div
                        class="hidden sm:block relative z-10 bg-gray-800 p-3 rounded-full border border-gray-600 text-pink-500">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                            </path>
                        </svg>
                    </div>
                </div>

                <% if(posts.length> 0) { %>
                    <div class="flex flex-col gap-6">
                        <% posts.forEach(post=> { %>
                            <article class="flex gap-4 border-b border-gray-800 pb-6 last:border-0 group">
                                <div
                                    class="w-[120px] h-[85px] md:w-[180px] md:h-[120px] flex-shrink-0 overflow-hidden rounded-md bg-gray-800">
                                    <a href="/read/<%= post.slug %>" class="block w-full h-full">
                                        <img src="<%= post.image.startsWith('http') ? post.image : '/uploads/' + post.image %>"
                                            class="w-full h-full object-cover transition duration-300 group-hover:scale-110"
                                            alt="<%= post.title %>">
                                    </a>
                                </div>
                                <div class="flex flex-col justify-between py-0.5 flex-grow min-w-0">
                                    <div>
                                        <h3
                                            class="text-white font-bold text-sm md:text-lg leading-snug line-clamp-2 mb-2 group-hover:text-pink-500 transition-colors">
                                            <a href="/read/<%= post.slug %>">
                                                <%= post.title %>
                                            </a>
                                        </h3>
                                        <p
                                            class="hidden md:block text-gray-400 text-sm line-clamp-2 mb-2 leading-relaxed">
                                            <%- post.content.replace(/(<([^>]+)>)/ig,"").substring(0, 110) %>...
                                        </p>
                                    </div>
                                    <div class="flex items-center gap-3 text-xs text-gray-400">
                                        <span class="text-pink-500 font-bold uppercase">
                                            <%= post.category[0] %>
                                        </span>
                                        <span>â€¢</span>
                                        <span>
                                            <%= post.createdAt.toLocaleDateString('id-ID', { day: 'numeric' ,
                                                month: 'long' , year: 'numeric' }) %>
                                        </span>
                                    </div>
                                </div>
                            </article>
                            <% }) %>
                    </div>
                    <% } else { %>
                        <div class="rounded-xl p-12 text-center border border-gray-700 bg-gray-800/30">
                            <svg class="w-16 h-16 text-gray-600 mx-auto mb-4" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                                </path>
                            </svg>
                            <div class="text-gray-400 text-lg font-bold">Belum ada berita</div>
                            <p class="text-gray-500 text-sm mt-1">Belum ada postingan di kategori ini.</p>
                        </div>
                        <% } %>

            </div>

            <div class="lg:col-span-1 space-y-8">

                <div class="p-5 border border-gray-700">
                    <h4 class="text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-600 pb-2">
                        <span class="text-pink-500">#</span> Update Terbaru
                    </h4>
                    <div class="space-y-4">
                        <% sidebarPosts.slice(0, 5).forEach(post=> { %>
                            <div class="flex gap-3 group">
                                <div class="w-16 h-16 flex-shrink-0 rounded overflow-hidden bg-gray-700">
                                    <img src="<%= post.image.startsWith('http') ? post.image : '/uploads/' + post.image %>"
                                        class="w-full h-full object-cover">
                                </div>
                                <div>
                                    <h5
                                        class="text-white text-sm font-semibold line-clamp-2 leading-snug group-hover:text-pink-500 transition">
                                        <a href="/read/<%= post.slug %>">
                                            <%= post.title %>
                                        </a>
                                    </h5>
                                    <small class="text-gray-500 text-xs">
                                        <%= post.category[0] %>
                                    </small>
                                </div>
                            </div>
                            <% }) %>
                    </div>
                </div>

                <div class="p-5 border border-gray-700">
                    <h4 class="text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-600 pb-2">
                        <span class="text-yellow-500">#</span> Jadwal Rilis
                    </h4>
                    <div class="space-y-4">
                        <% const jadwalPosts=sidebarPosts.filter(p=> p.category.some(c => c.toLowerCase() ===
                            'jadwal')).slice(0, 5);
                            %>
                            <% if(jadwalPosts.length> 0) { %>
                                <% jadwalPosts.forEach(post=> { %>
                                    <div class="flex gap-3 group">
                                        <div
                                            class="w-4 h-4 mt-0.5 rounded-full bg-yellow-500/20 text-yellow-500 flex items-center justify-center text-[10px] font-bold">
                                            ></div>
                                        <h5
                                            class="text-gray-300 text-sm font-medium line-clamp-2 hover:text-yellow-500 transition">
                                            <a href="/read/<%= post.slug %>">
                                                <%= post.title %>
                                            </a>
                                        </h5>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <p class="text-gray-500 text-sm">Belum ada jadwal terbaru.</p>
                                            <% } %>
                    </div>
                </div>

                <div class="p-5 border border-gray-700">
                    <h4 class="text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-600 pb-2">
                        <span class="text-blue-500">#</span> Kategori Lainnya
                    </h4>
                    <div class="flex flex-wrap gap-2">
                        <a href="/category/anime"
                            class="bg-gray-700 hover:bg-pink-600 text-gray-300 hover:text-white px-3 py-1.5 rounded text-sm transition">Anime</a>
                        <a href="/category/manga"
                            class="bg-gray-700 hover:bg-pink-600 text-gray-300 hover:text-white px-3 py-1.5 rounded text-sm transition">Manga</a>
                        <a href="/category/game"
                            class="bg-gray-700 hover:bg-pink-600 text-gray-300 hover:text-white px-3 py-1.5 rounded text-sm transition">Game</a>
                        <a href="/category/jadwal"
                            class="bg-gray-700 hover:bg-pink-600 text-gray-300 hover:text-white px-3 py-1.5 rounded text-sm transition">Jadwal</a>
                    </div>
                </div>

            </div>

        </div>
    </div>

    <%- include('partials/footer') %>